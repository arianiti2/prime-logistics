<div class="flex h-screen bg-slate-50 font-sans text-slate-900">


  @if (!hideSidebar()) {
    <aside class="w-72 bg-slate-900 text-slate-300 p-6 flex flex-col shrink-0 shadow-xl">
      <div class="flex items-center justify-between mb-10 px-2">
        <div class="flex items-center gap-3">
          <div class="w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center shadow-lg shadow-indigo-500/30">
            <span class="text-white font-bold">M</span>
          </div>
          <h1 class="text-xl font-bold text-white tracking-tight">My App</h1>
        </div>

        <button (click)="logout()" class="relative group p-2.5 rounded-lg bg-slate-800 text-slate-400 hover:bg-red-500 hover:text-white transition-all duration-200 cursor-pointer">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
          </svg>
          <span class="pointer-events-none absolute left-full top-1/2 ml-3 -translate-y-1/2 whitespace-nowrap rounded-md bg-slate-900 px-2 py-1 text-xs font-medium text-white opacity-0 group-hover:opacity-100 transition-all">Sign out</span>
        </button>
      </div>

      <div class="flex flex-col items-center gap-4 mb-10 pb-8 border-b border-slate-800">
        <button type="button" class="relative group" (click)="fileInput.click()">
          <img [src]="userAvatar() ? 'http://localhost:5000' + userAvatar() : 'assets/default-avatar.png'" class="w-20 h-20 rounded-full object-cover border-2 border-slate-700 group-hover:border-indigo-500 transition-all" />
        </button>
        <input #fileInput type="file" (change)="onFileSelected($event)" class="hidden" />
        <div class="text-center">
          <p class="text-sm font-semibold text-white">{{ userName() }}</p>
          <p class="text-[10px] text-slate-500 uppercase tracking-widest mt-1">Administrator</p>
        </div>
      </div>

      <nav class="flex flex-col gap-1">
        <a routerLink="/dashboard" routerLinkActive="bg-indigo-600 text-white shadow-lg" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-800 transition-all">
          <span class="font-medium">Dashboard</span>
        </a>
        <a routerLink="/customers" routerLinkActive="bg-indigo-600 text-white shadow-lg" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-800 transition-all">
          <span class="font-medium">Customers</span>
        </a>
         <a routerLink="/chatting" routerLinkActive="bg-indigo-600 text-white shadow-lg" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-800 transition-all">
    <div class="flex items-center justify-between w-full">
      <span class="font-medium">Messages</span>
      <!-- Optional: Notification Badge -->
      <span class="bg-indigo-400 text-[10px] text-white px-2 py-0.5 rounded-full">New</span>
    </div>
  </a>
      </nav>
    </aside>
  }

  <main class="flex-1 flex flex-col overflow-hidden">
  
    @if (!hideSidebar()) {
      <header class="h-16 bg-white border-b border-slate-200 px-8 flex items-center justify-between shrink-0">
        <h2 class="text-sm font-medium text-slate-500">Welcome back, <span class="text-slate-900 font-bold">{{ userName() }}</span></h2>
        <button (click)="logout()" class="group flex items-center gap-2 px-4 py-2 rounded-lg text-slate-600 hover:text-red-600 hover:bg-red-50 transition-all cursor-pointer">
          <span class="text-sm font-semibold">Sign Out</span>
        </button>
      </header>
    }

    
    @if (!hideSidebar() || isSidebarHidden()) {
      <div class="absolute top-4 left-4 z-10" [class.left-80]="!isSidebarHidden()">
        <button 
          (click)="toggleSidebar()" 
          class="p-2 bg-white border border-slate-200 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 hover:bg-slate-50"
          title="Toggle sidebar"
        >
          <svg class="w-5 h-5 text-slate-600 transition-transform duration-200" [class.rotate-180]="isSidebarHidden()" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
      </div>
    }

   
    <div [class.p-8]="!hideSidebar()" class="flex-1 overflow-auto">
      <div [class.max-w-7xl]="!hideSidebar()" class="mx-auto h-full">
        <router-outlet></router-outlet>
      </div>
    </div>
  </main>
</div>